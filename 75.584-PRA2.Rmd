---
title: 'Práctica 2: ¿Cómo realizar la limpieza y análisis de datos?'
subtitle: 'Tipología y ciclo de vida de los datos'
author: "Autores: Ouassim Aouattah Akandouch, Juan Andrés Dávila"
date: "Enero 2023"
output:
  pdf_document:
    highlight: zenburn
    toc: yes
  word_document: default
  html_document:
    highlight: default
    number_sections: yes
    theme: cosmo
    toc: yes
    toc_depth: 2
    includes:
      in_header: 75.584-PEC-header.html
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE) 
```
******
# 1. Descripción del dataset
******

## Descripción del dataset. ¿Por qué es importante y qué pregunta/problema pretende responder?

Este dataset, llamado *Heart Attack Analysis & Prediction Dataset*, contiene información sobre pacientes que han sufrido o podrían sufrir un ataque al corazón. Incluye atributos como la edad y el sexo del paciente, si ha experimentado angina inducida por ejercicio, el número de vasos principales, el tipo de dolor en el pecho, la presión arterial en reposo, el colesterol, los resultados electrocardiográficos en reposo, la frecuencia cardíaca máxima lograda, y finalmente si tiene más o menos probabilidades de sufrir un ataque al corazón.

Este dataset es importante ya que el ataque al corazón es una de las principales causas de mortalidad a nivel mundial. El análisis de estos datos puede ayudar a identificar patrones y factores de riesgo relacionados con los ataques cardíacos, lo que permitiría a los médicos y científicos de la salud tomar medidas preventivas y mejorar los tratamientos.Se puede responder preguntas como ¿Qué factor o variables son los de mayor incidencia cuando una persona sufre de un ataque al corazón?o ¿Las mujeres son mas propensas a tener este tipo de enfermedades? ¿es el colesterol un factor determinante para un ataque cardiaco?

Revisamos la descripción de las variables contenidas en el fichero y los tipos de cada una y a continuación Construimos un pequeño diccionario de datos utilizando la documentación auxiliar.


- `target`: Probabilidades de sufrir un ataque al corazón (0 = menor probabilidad, 1 = mayor probabilidad).
- `Age`: Edad del paciente (en años).
- `trtbps`: Presión arterial en reposo (en mm Hg).
- `cp`: Tipo de dolor en el pecho.
  - Valor 1: Angina típica.
  - Valor 2: Angina atípica.
  - Valor 3: Dolor no anginal.
  - Valor 4: Asintomático.
- `thalach`: Frecuencia cardíaca máxima alcanzada (en latidos por minuto).
- `Sex`: Sexo del paciente (1 = hombre, 0 = mujer).
- `exang`: Angina inducida por ejercicio (1 = sí, 0 = no).
- `caa`: Número de vasos principales (valores posibles: 0-3)
- `chol`: Colesterol (en mg/dl) obtenido a través del sensor de índice de masa corporal (IMC).
- `fbs`: Azúcar en sangre en ayuno > 120 mg/dl (1 = verdadero, 0 = falso).
- `rest_ecg`: Resultados electrocardiográficos en reposo.
  - Valor 0: Normal.
  - Valor 1: Anormalidades en las ondas ST-T (inversiones de onda T y/o elevación o depresión ST > 0.05 mV).
  - Valor 2: Hipertrofia ventricular izquierda probable o definitiva según los criterios de Estes.
  

# 2. Integración y selección

## Integración y selección de los datos de interés a analizar. Puede ser el resultado de adicionar diferentes datasets o una subselección útil de los datos originales, en base al objetivo que se quiera conseguir.

Como se indicó en el apartado anterior existen muchas variables con las cuales se pueden trabajar para poder realizar un análisis por lo que empezaremos cargando el fichero de datos.

```{r}
path = 'heart.csv'
df <- read.csv(path, row.names=NULL)
```
  
Verificamos la estructura del juego de datos principal. Mostramos el número de columnas que tenemos y ejemplos de los contenidos de las filas.

```{r}
structure = str(df)
summary(df)
```

Vemos que tenemos **14** variables y **303** registros.

En este caso podemos deshacernos de variables que no no seran utilizadas para el análisis de esta practica como el azucar en sangre o el numero de vasos princiaples. 

```{r}
df <- df[,!names(df) %in% c("caa", "fbs", "rest_ecg")]
summary(df)
```

# 3. Limpieza de los datos.
## 3.1. ¿Los datos contienen ceros o elementos vacíos? Gestiona cada uno de estos casos.
Un paso esencial será la limpieza de datos, mirando si hay valores vacíos o nulos.

```{r}
colSums(is.na(df))
colSums(df == "")
```

Vemos que no hay valores nulos en los datos ni existen campos llenos de espacios en blanco. Procedemos a convertir a factores las variables correspondientes a este tipo.

```{r}
df$exng <- factor(df$exng)
df$cp <- factor(df$cp)
df$output <- factor(df$output)
structure = str(df)
```
## 3.2. Identifica y gestiona los valores extremos
A continuación, analizaremos los posibles valores extremos de nuestro juego de datos.

```{r}
par(mfrow = c(3,2))
for(i in 1:ncol(df)) {
 boxplot(df[, i], main = colnames(df)[i],col="blue")
  plot(df[, i])
}
```

# 4. Análisis de los datos.
## 4.1. Selección de los grupos de datos que se quieren analizar/comparar (p. ej., si se van a comparar grupos de datos, ¿cuáles son estos grupos y qué tipo de análisis se van a aplicar?)
## 4.2. Comprobación de la normalidad y homogeneidad de la varianza.
## 4.3. Aplicación de pruebas estadísticas para comparar los grupos de datos.En función de los datos y el objetivo del estudio, aplicar pruebas de contraste de hipótesis, correlaciones, regresiones, etc. Aplicar al menos tres métodos de análisis diferentes.
# 5. Representación de los resultados a partir de tablas y gráficas. 

Los resultados graficos se representan en los apartados anteriores.

# 6. Resolución del problema. A partir de los resultados obtenidos,


# Conclusiones

Este dataset contiene información sobre pacientes que han tenido o podrían tener ataques al corazón. Los atributos incluyen la edad y el sexo del paciente, si el paciente ha experimentado angina inducida por ejercicio (exang), el número de vasos principales (ca), el tipo de dolor en el pecho (cp), la presión arterial en reposo (trtbps), el colesterol (chol), si el paciente tiene niveles elevados de azúcar en sangre en ayuno (fbs), los resultados electrocardiográficos en reposo (rest_ecg), la frecuencia cardíaca máxima lograda (thalach), y si el paciente tiene más o menos probabilidades de sufrir un ataque al corazón (target). Los valores para los atributos incluyen información como la edad y el sexo del paciente, y variables categóricas como el tipo de dolor en el pecho, los resultados electrocardiográficos y si el paciente tiene más o menos probabilidades de sufrir un ataque al corazón.

Revisados los datos parecen bien informados. Los datos están limpios y bien documentados. No plantean graves problemas de campos con valores nulos o vacíos y tienen bastante potencial para generar nuevos indicadores a partir de los datos.

Pretendiamos analizar patrones y factores de riesgo relacionados con los ataques cardíacos, y para desarrollar modelos de predicción para determinar si un paciente está en riesgo de sufrir un ataque al corazón.

# Bibliografía

- Calvo M, Subirats L, Pérez D (2019). *Introducción a la limpieza y análisis de los datos*. Editorial UOC.
- Julià Minguillón Alfonso, Ramon Caihuelas Quiles. (2021). *Proceso de minería de datos*. Editorial FUOC.
- RASHIK RAHMAN (2021). *Heart Attack Analysis & Prediction Dataset*. https://www.kaggle.com/datasets/rashikrahmanpritom/heart-attack-analysis-prediction-dataset?resource=download&select=heart.csv
